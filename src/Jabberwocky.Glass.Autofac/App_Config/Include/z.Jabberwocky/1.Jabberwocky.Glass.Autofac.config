<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">

  <sitecore>
    
    <!-- Factory Configuration -->
    <factories>
      <factory id="Autofac" type="Jabberwocky.Glass.Autofac.DependencyInjection.Factories.AutofacSitecoreFactory, Jabberwocky.Glass.Autofac" />
    </factories>

		<!-- Dependency Injection Service Provider -->
		<serviceProviderBuilder>
			<patch:attribute name="type" value="Jabberwocky.Glass.Autofac.DependencyInjection.AutofacServiceProviderBuilder, Jabberwocky.Glass.Autofac" />
		</serviceProviderBuilder>

		<!-- Autofac Dependency Registration Pipeline -->
		<pipelines>
			<registerAutofacDependencies>
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.ConfigureScannedAssemblies, Jabberwocky.Glass.Autofac">
					<ConfiguredAssemblies hint="list:AddAssembly">
						<!-- Add your Website DLL & Libraries here -->
						<GlassMapper>Glass.Mapper</GlassMapper>
						<GlassMapperSc>Glass.Mapper.Sc</GlassMapperSc>
						<GlassMapperMvc>Glass.Mapper.Mvc</GlassMapperMvc>
					</ConfiguredAssemblies>
				</processor>
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.AutowireDependencies, Jabberwocky.Glass.Autofac" />
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.RegisterGlassServices, Jabberwocky.Glass.Autofac" />
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.RegisterCacheServices, Jabberwocky.Glass.Autofac" />
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.RegisterProcessors, Jabberwocky.Glass.Autofac">
					<IncludeScanAssemblies desc="Include Scanned Assemblies">true</IncludeScanAssemblies>
					<ConfiguredAssemblies hint="list:AddAssembly">
						<!-- Add your Website DLL & Libraries here and optionally set IncludeScanAssemblies to false to ignore everything else -->
					</ConfiguredAssemblies>
				</processor>
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.RegisterGlassFactory, Jabberwocky.Glass.Autofac" />
				
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.PopulateServiceCollection, Jabberwocky.Glass.Autofac" />
			
				<processor type="Jabberwocky.Glass.Autofac.Pipelines.RegisterAutofacDependencies.BuildContainer, Jabberwocky.Glass.Autofac" />
			</registerAutofacDependencies>
		</pipelines>
	
  </sitecore>

</configuration>